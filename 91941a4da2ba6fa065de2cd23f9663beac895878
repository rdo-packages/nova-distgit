{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e0bc4a30_3a54c680",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 715
      },
      "writtenOn": "2022-02-15T19:06:40Z",
      "side": 1,
      "message": "recheck",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "76be4622_3de0646c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 761
      },
      "writtenOn": "2022-02-15T21:58:38Z",
      "side": 1,
      "message": "\u003e And regarding the security concern, I believe the the original way is more secure and let me explain:\n\u003e - A rogue ssh client can only execute what it\u0027s able to pass to the remote host.\n\u003e - By strictly checking the command, we make sure they can only execute these specific commands.\n\u003e - Unless they already have access to the host and can overwrite these commands, their impact is pretty limited\n\u003e - By using regex like this, I believe that it\u0027s possible to do something like this:\n\u003e         nc +$ARG +-U +/var/run/libvirt/libvirt-sock\"; su -c \"evil commands\"\n\nUnless I missed something, that will actually not work because we\nonly look at ``SSH_ORIGINAL_COMMAND`` (i.e. the command provided by the\nssh client) to decide whether virt-ssh-helper or nc should be used:\nafter that has been determined, the entire script is thrown out and\nwe explicitly call either `virt-ssh-helper qemu:///system` or `nc -U\n/var/run/libvirt/libvirt-sock`. So there is no possibility for a\nrogue client to inject malicious commands.\n\nI\u0027ve updated the commit message to clarify this further, and of\ncourse addressed the nits you pointed out as well.\n\nThanks a lot for your quick and thorough review! :)",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "83384760_7a8d3e61",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 761
      },
      "writtenOn": "2022-02-15T22:00:01Z",
      "side": 1,
      "message": "I just realized my comments had been sitting as drafts for hours ðŸ¤¦\n\nIs it very obvious that this is my first time using Gerrit?",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2dc71bff_9f874864",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 715
      },
      "writtenOn": "2022-02-16T18:46:19Z",
      "side": 1,
      "message": "Please, don\u0027t feel bad, it still happens to me ðŸ¤¦",
      "parentUuid": "83384760_7a8d3e61",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2cc9c339_6c9bd313",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 128
      },
      "writtenOn": "2022-02-22T08:21:00Z",
      "side": 1,
      "message": "Wouldn\u0027t be better to have this script in upstream repo?",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72983cc9_ccf23a87",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 715
      },
      "writtenOn": "2022-02-22T14:10:32Z",
      "side": 1,
      "message": "We proposed it recently and it was refused in THT",
      "parentUuid": "2cc9c339_6c9bd313",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8017d7b_8bb15b6d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 600
      },
      "writtenOn": "2022-02-22T14:15:41Z",
      "side": 1,
      "message": "yes we would like to remove it from this repo and move it to THT\nit is not something that should be in nova itself as this is a ooo specific script that in a normal nova deployment should not be required.",
      "parentUuid": "72983cc9_ccf23a87",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4329ddf3_2c353400",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 761
      },
      "writtenOn": "2022-02-22T15:07:41Z",
      "side": 1,
      "message": "Thanks a lot everyone! I\u0027m quite impressed by how smooth it was to get my first contribution accepted ðŸ˜Š\n\nA couple of follow-up questions.\n\nI see that the initial implementation of virt-ssh-helper detection (https://review.rdoproject.org/r/c/openstack/nova-distgit/+/36142) was backported to the wallaby and xena releases. Would it make sense to do the same for this change? It should be trivial and I don\u0027t mind doing it.\n\nMore relevant to my interests, what is the project\u0027s policy when it comes to picking up new libvirt versions? I see in the spec file that there is an explicit requirement for libvirt \u003e\u003d 5.0.0, but that doesn\u0027t tell me whether the next release is going to ship with a version newer than 8.0.0 or whether older releases will get rebased libvirt versions over their lifetimes.\n\nIt is important for me to understand that because it sets the timeline for getting my libvirt changes in. Specifically, if old releases are not going to ever get libvirt \u003e 8.0.0 then I don\u0027t need to worry about my changes possibly breaking them.\n\nThanks again!",
      "revId": "91941a4da2ba6fa065de2cd23f9663beac895878",
      "serverId": "270e2033-b340-4cff-9539-693957ebf0e7"
    }
  ]
}